# Learn Data-Driven Documents

這陣子因為工作的任務，密集的接觸 d3js。D3 是 Data-Driven Documents 的縮寫，三個 D 字母組成，所以叫做 D3。又因為是以 JavaScript 為開發語言所實作出來的函示庫，因此名稱為 D3.js。

## Brush Height and Width

因為工作上的需求，需要在使用 D3.js 建立的 Line Chart 的 X 軸下方有縮圖，並需要有 Brush 能在縮圖中拖曳和縮放，來決定 Line Chart 顯示的位置和寬度。然而， D3.js 的原始設計，並沒有辦法限制 Brush 的最小長寬及最大長寬。想要達到能夠限制 Brush 的縮放長寬大小，僅需要再 D3.js 的原始碼內加上數行便能達成。

[Live Demo](https://s3-us-west-2.amazonaws.com/s.hoebus.idv.tw/examples/brush-min-width/index.html)

限制 Brush 的最小寬度為 100px。

[Source Code]()

## Network Usage

在網通公司上班，產品圖表裡面一定少不了的就是網路使用量的曲線圖。在實作網路流量的曲線圖時，有幾個原則需要掌握，作為設計網路使用量曲線圖的資料模型原則。一般在統計網路使用量，所取得的資料是在某個時間點，從網路介面取得的收送封包數量，與收送資料量。這一組數字，是在網路介面啟動時，從 0 開始累積的。網路使用量的歷史原始數據紀錄內容會是在某個時間點，所取得的網路介面累計傳輸量。

設備剛開機的時候，所有的網路介面的累計傳輸量會是 0，第一筆紀錄會是設備開機時間時，網路介面的累計傳輸量 0，爾後每次紀錄都會有時間與累計傳輸量。

時間|累計封包量(收)|累計封包量(送)|累計傳輸量(收)|累計傳輸量(送)|註解
-|-|-|-|-|-
4:25:00|0|0|0|0|開機
4:26:00|205|194|2661|3149|第一次記錄
4:27:00|568|275|3509|4790|第二次紀錄
4:43:00|5827|9322|84382|99083|第三次紀錄

從原始數據紀錄，只能夠計算出某個時間區間內的網路均速。一個正確的網路使用量曲線圖，其實並不是真正的曲線圖，而是由柱狀圖所組成。(迷之音：為什麼我看到的產品畫面呈現，網路使用量歷史紀錄圖表，都是曲線圖呢？)

時間區間|Pkt/s(收)|Pkt/s(送)|Bytes/s(收)|Bytes/s(送)|註解
-|-|-|-|-|-
4:25 ~ 4:26|3.41|3.23|44.35|52.48|
4:26 ~ 4:27|6.05|1.35|14.13|27.35|
4:27 ~ 4:43|87.65|150.95|1347.88|1571.55|

從這樣的歷史原始數據紀錄，是可以查詢有紀錄的任何時間區間的網路均速。即便中間有很長的一段時間沒有進行累計數據取樣，只要查詢的時間區間前後皆有取樣紀錄，都可以得到指定時間區間的網路均速。

例如，從上面的歷史原始數據紀錄，4:27 之後，過了 16 分鐘後，才再次取樣，但仍舊可以得知 4:27 ~ 4:43 這段時間內的網路均速。不管查詢 4:30 或 4:40 分的網路均速，得到的結果都是一樣的均速。